import"../chunks/CWj6FrbW.js";import{Q as ge,b as me,i as W,h as y,R as we,d as pe,z as _,ao as be,e as ye,g as Z,j as L,n as S,Z as Ee,k as le,l as ne,m as ze,ap as q,a1 as ie,M as F,aq as xe,w as Ae,ar as G,as as Te,at as Ie,a0 as Ne,au as Re,av as Se,aw as Ce,ax as Me,X as De,O as He,a4 as fe,a6 as ue,a5 as Oe,p as ve,ak as J,A as V,al as K,ad as P,c as x,r as E,s as C,t as ce,a as oe,ay as j,an as $,f as Ve}from"../chunks/C5RO-5A5.js";import{l as We,e as de,t as D,s as _e,f as Le,a as M}from"../chunks/D6srbyFG.js";import{s as qe,a as X,b as Xe,i as Ye}from"../chunks/yFrSbgqD.js";import{r as Be,_ as Qe,s as Ue,a as Ze,b as Fe,c as Ge,d as Je}from"../chunks/CD1MlRUJ.js";import{r as Ke,b as ee,a as ae,h as te}from"../chunks/BW6WRhVc.js";function Pe(a,e,t,s){for(var r=[],u=e.length,l=0;l<u;l++)Ie(e[l].e,r,!0);var c=u>0&&r.length===0&&t!==null;if(c){var d=t.parentNode;Ne(d),d.append(t),s.clear(),A(a,e[0].prev,e[u-1].next)}Re(r,()=>{for(var h=0;h<u;h++){var n=e[h];c||(s.delete(n.k),A(a,n.prev,n.next)),Se(n.e,!c)}})}function je(a,e,t,s,r,u=null){var l=a,c={flags:e,items:new Map,first:null};{var d=a;l=y?W(we(d)):d.appendChild(ge())}y&&pe();var h=null,n=!1,g=be(()=>{var f=t();return He(f)?f:f==null?[]:ie(f)});me(()=>{var f=_(g),i=f.length;if(n&&i===0)return;n=i===0;let v=!1;if(y){var p=l.data===ye;p!==(i===0)&&(l=Z(),W(l),L(!1),v=!0)}if(y){for(var b=null,o,m=0;m<i;m++){if(S.nodeType===8&&S.data===Ee){l=S,v=!0,L(!1);break}var T=f[m],k=s(T,m);o=ke(S,c,b,null,T,k,m,r,e,t),c.items.set(k,o),b=o}i>0&&W(Z())}y||$e(f,c,l,r,e,s,t),u!==null&&(i===0?h?le(h):h=ne(()=>u(l)):h!==null&&ze(h,()=>{h=null})),v&&L(!0),_(g)}),y&&(l=S)}function $e(a,e,t,s,r,u,l){var c=a.length,d=e.items,h=e.first,n=h,g,f=null,i=[],v=[],p,b,o,m;for(m=0;m<c;m+=1){if(p=a[m],b=u(p,m),o=d.get(b),o===void 0){var T=n?n.e.nodes_start:t;f=ke(T,e,f,f===null?e.first:f.next,p,b,m,s,r,l),d.set(b,f),i=[],v=[],n=f.next;continue}if(ea(o,p,m),(o.e.f&q)!==0&&le(o.e),o!==n){if(g!==void 0&&g.has(o)){if(i.length<v.length){var k=v[0],w;f=k.prev;var H=i[0],N=i[i.length-1];for(w=0;w<i.length;w+=1)se(i[w],k,t);for(w=0;w<v.length;w+=1)g.delete(v[w]);A(e,H.prev,N.next),A(e,f,H),A(e,N,k),n=k,f=N,m-=1,i=[],v=[]}else g.delete(o),se(o,n,t),A(e,o.prev,o.next),A(e,o,f===null?e.first:f.next),A(e,f,o),f=o;continue}for(i=[],v=[];n!==null&&n.k!==b;)(n.e.f&q)===0&&(g??(g=new Set)).add(n),v.push(n),n=n.next;if(n===null)continue;o=n}i.push(o),f=o,n=o.next}if(n!==null||g!==void 0){for(var R=g===void 0?[]:ie(g);n!==null;)(n.e.f&q)===0&&R.push(n),n=n.next;var z=R.length;if(z>0){var I=c===0?t:null;Pe(e,R,I,d)}}F.first=e.first&&e.first.e,F.last=f&&f.e}function ea(a,e,t,s){xe(a.v,e),a.i=t}function ke(a,e,t,s,r,u,l,c,d,h){var n=(d&Ce)!==0,g=(d&Me)===0,f=n?g?Ae(r):G(r):r,i=(d&Te)===0?l:G(l),v={i,v:f,k:u,a:null,e:null,prev:t,next:s};try{return v.e=ne(()=>c(a,f,i,h),y),v.e.prev=t&&t.e,v.e.next=s&&s.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function se(a,e,t){for(var s=a.next?a.next.e.nodes_start:t,r=e?e.e.nodes_start:t,u=a.e.nodes_start;u!==s;){var l=De(u);r.before(u),u=l}}function A(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function aa(a,e,t){fe(()=>{var s=ue(()=>e(a,t==null?void 0:t())||{});if(s!=null&&s.destroy)return()=>s.destroy()})}const re=[...` 	
\r\fÂ \v\uFEFF`];function ta(a,e,t){var s=a==null?"":""+a;if(t){for(var r in t)if(t[r])s=s?s+" "+r:r;else if(s.length)for(var u=r.length,l=0;(l=s.indexOf(r,l))>=0;){var c=l+u;(l===0||re.includes(s[l-1]))&&(c===s.length||re.includes(s[c]))?s=(l===0?"":s.substring(0,l))+s.substring(c+1):l=c}}return s===""?null:s}function Q(a,e,t,s,r,u){var l=a.__className;if(y||l!==t||l===void 0){var c=ta(t,s,u);(!y||c!==a.getAttribute("class"))&&(c==null?a.removeAttribute("class"):a.className=c),a.__className=t}else if(u&&r!==u)for(var d in u){var h=!!u[d];(r==null||h!==!!r[d])&&a.classList.toggle(d,h)}return u}function sa(a,e,t=e){We(a,"input",s=>{var r=s?a.defaultValue:a.value;if(r=Y(a)?B(r):r,t(r),r!==(r=e())){var u=a.selectionStart,l=a.selectionEnd;a.value=r??"",l!==null&&(a.selectionStart=u,a.selectionEnd=Math.min(l,a.value.length))}}),(y&&a.defaultValue!==a.value||ue(e)==null&&a.value)&&t(Y(a)?B(a.value):a.value),Oe(()=>{var s=e();Y(a)&&s===B(a.value)||a.type==="date"&&!s&&!a.value||s!==a.value&&(a.value=s??"")})}function Y(a){var e=a.type;return e==="number"||e==="range"}function B(a){return a===""?null:+a}let O;function ra(){return O||(O=new Audio(Ke("/success.mp3")),O)}async function la(){const a=ra();a.currentTime=0,await a.play()}const na=(a,e,t,s,r)=>{if(V(e,!_(e)),_(e)&&la(),_(t)!==s.task.text)return r(_(t),_(e));Je(s.task.id,_(e))};function ia(a,e,t,s,r,u){if(a.key==="Enter"){if(!_(e).length)return t(s.task.id);r(_(e),_(u))}}var fa=D('<div><i class="f7-icons link svelte-9gwtiz"> </i> <input type="text" class="svelte-9gwtiz"></div>');function ua(a,e){ve(e,!0);function t(i){e.task.id.startsWith("new-")&&i.focus()}J(()=>{V(s,e.task.done,!0)}),J(()=>{V(r,e.task.text,!0)});let s=K(P(e.task.done)),r=K(P(e.task.text));async function u(i,v){if(!e.task.id.startsWith("new-"))return Ze(e.task.id,i,v);let p=await Fe({text:i,done:v});await Ge(p)}const l=i=>Qe(i);async function c(i){if(e.task.id.startsWith("new-")&&!_(r).length||(console.log("onblur",e.task.id,_(r),_(s)),!_(r).length))return l(e.task.id);if(_(r)!==e.task.text)return u(_(r),_(s))}var d=fa();let h;var n=x(d);n.__pointerdown=[na,s,r,e,u];var g=x(n,!0);E(n);var f=C(n,2);Be(f),f.__keyup=[ia,r,l,e,u,s],fe(()=>sa(f,()=>_(r),i=>V(r,i))),aa(f,i=>t==null?void 0:t(i)),E(d),ce(i=>{Ue(d,"id",e.task.id),h=Q(d,1,"task svelte-9gwtiz",null,h,i),_e(g,_(s)?"circle_fill":"circle")},[()=>({done:_(s)})]),Le("blur",f,c),M(a,d),oe()}de(["pointerdown","keyup"]);var va=D('<i class="f7-icons svelte-zkp53l">checkmark_alt_circle</i> <span class="svelte-zkp53l">All tasks completed, great job!</span>',1),ca=D('<i class="f7-icons svelte-zkp53l">info_circle</i> <span class="svelte-zkp53l">No tasks, <span class="link">create one!</span></span>',1),oa=D('<div class="info svelte-zkp53l"><!></div>'),da=D('<div class="tasks_page svelte-zkp53l"><div class="options svelte-zkp53l"><div><i class="f7-icons svelte-zkp53l"> </i> <span class="svelte-zkp53l">Show Completed</span></div></div> <div class="list svelte-zkp53l"></div> <div><i class="f7-icons svelte-zkp53l">plus</i></div></div>');function pa(a,e){ve(e,!0);const[t,s]=qe(),r=()=>X(te,"$has_new_tasks",t),u=()=>X(ae,"$tasks",t),l=()=>X(ee,"$show_completed",t);function c(){if(r())return;let k=new Date().toISOString();Xe(ae,[...u(),{id:`new-${Date.now()}`,text:"",done:!1,created_at:k,updated_at:k}]),te.set(!0)}let d=()=>ee.set(!l()),h=$(()=>u().filter(k=>k.id.startsWith("new-")||l()?!0:!k.done));const n=$(()=>!!u().filter(k=>k.done).length);var g=da(),f=x(g),i=x(f);let v;i.__click=d;var p=x(i),b=x(p,!0);E(p),j(2),E(i),E(f);var o=C(f,2);je(o,21,()=>_(h),k=>k.id,(k,w)=>{ua(k,{get task(){return _(w)}})},k=>{var w=oa(),H=x(w);{var N=z=>{var I=va();j(2),M(z,I)},R=z=>{var I=ca(),U=C(Ve(I),2),he=C(x(U));he.__click=c,E(U),M(z,I)};Ye(H,z=>{_(n)?z(N):z(R,!1)})}E(w),M(k,w)}),E(o);var m=C(o,2);let T;m.__click=c,E(g),ce((k,w)=>{v=Q(i,1,"option link hover svelte-zkp53l",null,v,k),_e(b,l()?"checkmark_alt_circle_fill":"circle"),T=Q(m,1,"button svelte-zkp53l",null,T,w)},[()=>({selected:l()}),()=>({link:!r(),hover:!r(),disabled:r()})]),M(a,g),oe(),s()}de(["click"]);export{pa as component};
